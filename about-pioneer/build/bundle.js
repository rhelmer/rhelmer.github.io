var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function l(t){return"function"==typeof t}function i(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function r(t,n,e,o){if(t){const l=s(t,n,e,o);return t[0](l)}}function s(t,n,e,o){return t[1]&&o?function(t,n){for(const e in n)t[e]=n[e];return t}(e.ctx.slice(),t[1](o(n))):e.ctx}function c(t,n,e,o,l,i,r){const c=function(t,n,e,o){if(t[2]&&o){const l=t[2](o(e));if(void 0===n.dirty)return l;if("object"==typeof l){const t=[],e=Math.max(n.dirty.length,l.length);for(let o=0;o<e;o+=1)t[o]=n.dirty[o]|l[o];return t}return n.dirty|l}return n.dirty}(n,o,l,i);if(c){const l=s(n,e,o,r);t.p(l,c)}}function u(t,n){t.appendChild(n)}function d(t,n,e){t.insertBefore(n,e||null)}function a(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function m(){return p(" ")}function h(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function $(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function g(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}let y;function b(t){y=t}function v(t){(function(){if(!y)throw new Error("Function called outside component initialization");return y})().$$.on_destroy.push(t)}const w=[],S=[],_=[],x=[],E=Promise.resolve();let k=!1;function C(t){_.push(t)}let O=!1;const I=new Set;function N(){if(!O){O=!0;do{for(let t=0;t<w.length;t+=1){const n=w[t];b(n),M(n.$$)}for(b(null),w.length=0;S.length;)S.pop()();for(let t=0;t<_.length;t+=1){const n=_[t];I.has(n)||(I.add(n),n())}_.length=0}while(w.length);for(;x.length;)x.pop()();k=!1,O=!1,I.clear()}}function M(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(C)}}const T=new Set;let j;function J(){j={r:0,c:[],p:j}}function L(){j.r||o(j.c),j=j.p}function A(t,n){t&&t.i&&(T.delete(t),t.i(n))}function W(t,n,e,o){if(t&&t.o){if(T.has(t))return;T.add(t),j.c.push(()=>{T.delete(t),o&&(e&&t.d(1),o())}),t.o(n)}}function B(t){t&&t.c()}function q(t,e,i){const{fragment:r,on_mount:s,on_destroy:c,after_update:u}=t.$$;r&&r.m(e,i),C(()=>{const e=s.map(n).filter(l);c?c.push(...e):o(e),t.$$.on_mount=[]}),u.forEach(C)}function z(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function F(t,n){-1===t.$$.dirty[0]&&(w.push(t),k||(k=!0,E.then(N)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function P(n,l,i,r,s,c,u=[-1]){const d=y;b(n);const f=l.props||{},p=n.$$={fragment:null,ctx:null,props:c,update:t,not_equal:s,bound:e(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:e(),dirty:u,skip_bound:!1};let m=!1;if(p.ctx=i?i(n,f,(t,e,...o)=>{const l=o.length?o[0]:e;return p.ctx&&s(p.ctx[t],p.ctx[t]=l)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](l),m&&F(n,t)),e}):[],p.update(),m=!0,o(p.before_update),p.fragment=!!r&&r(p.ctx),l.target){if(l.hydrate){const t=function(t){return Array.from(t.childNodes)}(l.target);p.fragment&&p.fragment.l(t),t.forEach(a)}else p.fragment&&p.fragment.c();l.intro&&A(n.$$.fragment),q(n,l.target,l.anchor),N()}b(d)}class D{$destroy(){z(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const G=[];function H(n,e=t){let o;const l=[];function r(t){if(i(n,t)&&(n=t,o)){const t=!G.length;for(let t=0;t<l.length;t+=1){const e=l[t];e[1](),G.push(e,n)}if(t){for(let t=0;t<G.length;t+=2)G[t][0](G[t+1]);G.length=0}}}return{set:r,update:function(t){r(t(n))},subscribe:function(i,s=t){const c=[i,s];return l.push(c),1===l.length&&(o=e(r)||t),i(n),()=>{const t=l.indexOf(c);-1!==t&&l.splice(t,1),0===l.length&&(o(),o=null)}}}}const K={subscribe:H({},async t=>{let n,e,o;window.addEventListener("WebChannelMessageToContent",(function(l){console.debug(l.detail.message);const i=Object.keys(l.detail.message.data)[0],r=l.detail.message.data[i];switch(i){case"activeStudies":return e=r,void t({enrolled:n,activeStudies:e,availableStudies:o});case"availableStudies":o=r,Q({activeStudies:!0});break;case"enrolled":n=r,Q({availableStudies:!0});break;case"enroll":case"unenroll":!0===r&&Q({enrolled:!0});break;case"installStudy":case"uninstallStudy":Q({activeStudies:!0})}})),Q({enrolled:!0})}).subscribe};function Q(t){window.dispatchEvent(new window.CustomEvent("WebChannelMessageToChrome",{detail:JSON.stringify({id:"pioneer",message:t})}))}const R=t=>({}),U=t=>({}),V=t=>({}),X=t=>({}),Y=t=>({}),Z=t=>({}),tt=t=>({}),nt=t=>({});function et(t){let n;return{c(){n=p("Join")},m(t,e){d(t,n,e)},d(t){t&&a(n)}}}function ot(t){let n;return{c(){n=p("Leave")},m(t,e){d(t,n,e)},d(t){t&&a(n)}}}function lt(t){let n,e,o,l,i,s,g,y,b,v,w,S,_,x,E;const k=t[5].name,C=r(k,t,t[4],nt),O=C||function(t){let n;return{c(){n=f("span"),$(n,"class","missing svelte-8i716l")},m(t,e){d(t,n,e)},d(t){t&&a(n)}}}(),I=t[5].authors,N=r(I,t,t[4],Z),M=N||function(t){let n;return{c(){n=f("span"),$(n,"class","missing svelte-8i716l")},m(t,e){d(t,n,e)},d(t){t&&a(n)}}}(),T=t[5].icon,j=r(T,t,t[4],X),J=j||function(t){let n;return{c(){n=f("span"),$(n,"class","missing svelte-8i716l")},m(t,e){d(t,n,e)},d(t){t&&a(n)}}}(),L=t[5].description,B=r(L,t,t[4],U),q=B||function(t){let n;return{c(){n=f("span"),$(n,"class","description svelte-8i716l")},m(t,e){d(t,n,e)},d(t){t&&a(n)}}}();function z(t,n){return t[1]?ot:et}let F=z(t),P=F(t);return{c(){n=f("article"),e=f("h2"),O&&O.c(),o=m(),l=f("div"),M&&M.c(),i=m(),s=f("div"),J&&J.c(),g=m(),y=f("div"),q&&q.c(),b=m(),v=f("button"),P.c(),w=p(" Study"),$(e,"class","svelte-8i716l"),$(l,"class","authors svelte-8i716l"),$(s,"class","icon"),$(y,"class","description svelte-8i716l"),v.disabled=S=!t[0],$(n,"class","study-card svelte-8i716l")},m(r,c){d(r,n,c),u(n,e),O&&O.m(e,null),u(n,o),u(n,l),M&&M.m(l,null),u(n,i),u(n,s),J&&J.m(s,null),u(n,g),u(n,y),q&&q.m(y,null),u(n,b),u(n,v),P.m(v,null),u(v,w),_=!0,x||(E=h(v,"click",t[2]),x=!0)},p(t,[n]){C&&C.p&&16&n&&c(C,k,t,t[4],n,tt,nt),N&&N.p&&16&n&&c(N,I,t,t[4],n,Y,Z),j&&j.p&&16&n&&c(j,T,t,t[4],n,V,X),B&&B.p&&16&n&&c(B,L,t,t[4],n,R,U),F!==(F=z(t))&&(P.d(1),P=F(t),P&&(P.c(),P.m(v,w))),(!_||1&n&&S!==(S=!t[0]))&&(v.disabled=S)},i(t){_||(A(O,t),A(M,t),A(J,t),A(q,t),_=!0)},o(t){W(O,t),W(M,t),W(J,t),W(q,t),_=!1},d(t){t&&a(n),O&&O.d(t),M&&M.d(t),J&&J.d(t),q&&q.d(t),P.d(),x=!1,E()}}}function it(t){window.dispatchEvent(new window.CustomEvent("WebChannelMessageToChrome",{detail:JSON.stringify({id:"pioneer",message:t})}))}function rt(t,n,e){let{$$slots:o={},$$scope:l}=n,{enrolled:i=!1}=n,{studyEnrolled:r=!1}=n,{studyId:s}=n;return t.$$set=t=>{"enrolled"in t&&e(0,i=t.enrolled),"studyEnrolled"in t&&e(1,r=t.studyEnrolled),"studyId"in t&&e(3,s=t.studyId),"$$scope"in t&&e(4,l=t.$$scope)},[i,r,function(){it(r?{uninstallStudy:s}:{installStudy:s})},s,l,o]}class st extends D{constructor(t){super(),P(this,t,rt,lt,i,{enrolled:0,studyEnrolled:1,studyId:3})}}function ct(t){let n;return{c(){n=p("Join")},m(t,e){d(t,n,e)},d(t){t&&a(n)}}}function ut(t){let n;return{c(){n=p("Leave")},m(t,e){d(t,n,e)},d(t){t&&a(n)}}}function dt(n){let e,o,l,i;function r(t,n){return t[0]?ut:ct}let s=r(n),c=s(n);return{c(){e=f("button"),c.c(),o=p(" Ion")},m(t,r){d(t,e,r),c.m(e,null),u(e,o),l||(i=h(e,"click",n[1]),l=!0)},p(t,[n]){s!==(s=r(t))&&(c.d(1),c=s(t),c&&(c.c(),c.m(e,o)))},i:t,o:t,d(t){t&&a(e),c.d(),l=!1,i()}}}function at(t){window.dispatchEvent(new window.CustomEvent("WebChannelMessageToChrome",{detail:JSON.stringify({id:"pioneer",message:t})}))}function ft(t,n,e){let{enrolled:o=!1}=n;return t.$$set=t=>{"enrolled"in t&&e(0,o=t.enrolled)},[o,function(){at(o?{unenroll:!0}:{enroll:!0})}]}class pt extends D{constructor(t){super(),P(this,t,ft,dt,i,{enrolled:0})}}function mt(t,n,e){const o=t.slice();return o[2]=n[e],o}function ht(t){let n,e,o,l;n=new pt({props:{enrolled:t[0].enrolled}});let i=t[0].availableStudies,r=[];for(let n=0;n<i.length;n+=1)r[n]=vt(mt(t,i,n));const s=t=>W(r[t],1,1,()=>{r[t]=null});return{c(){B(n.$$.fragment),e=m();for(let t=0;t<r.length;t+=1)r[t].c();o=p("")},m(t,i){q(n,t,i),d(t,e,i);for(let n=0;n<r.length;n+=1)r[n].m(t,i);d(t,o,i),l=!0},p(t,e){const l={};if(1&e&&(l.enrolled=t[0].enrolled),n.$set(l),1&e){let n;for(i=t[0].availableStudies,n=0;n<i.length;n+=1){const l=mt(t,i,n);r[n]?(r[n].p(l,e),A(r[n],1)):(r[n]=vt(l),r[n].c(),A(r[n],1),r[n].m(o.parentNode,o))}for(J(),n=i.length;n<r.length;n+=1)s(n);L()}},i(t){if(!l){A(n.$$.fragment,t);for(let t=0;t<i.length;t+=1)A(r[t]);l=!0}},o(t){W(n.$$.fragment,t),r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)W(r[t]);l=!1},d(t){z(n,t),t&&a(e),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(r,t),t&&a(o)}}}function $t(t){let n,e,o=t[2].name+"";return{c(){n=f("span"),e=p(o),$(n,"slot","name")},m(t,o){d(t,n,o),u(n,e)},p(t,n){1&n&&o!==(o=t[2].name+"")&&g(e,o)},d(t){t&&a(n)}}}function gt(t){let n,e,o=t[2].authors.name+"";return{c(){n=f("span"),e=p(o),$(n,"slot","authors")},m(t,o){d(t,n,o),u(n,e)},p(t,n){1&n&&o!==(o=t[2].authors.name+"")&&g(e,o)},d(t){t&&a(n)}}}function yt(t){let n,e,o=t[2].description+"";return{c(){n=f("span"),e=p(o),$(n,"slot","description")},m(t,o){d(t,n,o),u(n,e)},p(t,n){1&n&&o!==(o=t[2].description+"")&&g(e,o)},d(t){t&&a(n)}}}function bt(n){let e,o,l;return{c(){e=m(),o=m(),l=m()},m(t,n){d(t,e,n),d(t,o,n),d(t,l,n)},p:t,d(t){t&&a(e),t&&a(o),t&&a(l)}}}function vt(t){let n,e;return n=new st({props:{studyId:t[2].addon_id,enrolled:t[0].enrolled,studyEnrolled:t[0].activeStudies.includes(t[2].addon_id),$$slots:{default:[bt],description:[yt],authors:[gt],name:[$t]},$$scope:{ctx:t}}}),{c(){B(n.$$.fragment)},m(t,o){q(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.studyId=t[2].addon_id),1&e&&(o.enrolled=t[0].enrolled),1&e&&(o.studyEnrolled=t[0].activeStudies.includes(t[2].addon_id)),33&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){e||(A(n.$$.fragment,t),e=!0)},o(t){W(n.$$.fragment,t),e=!1},d(t){z(n,t)}}}function wt(t){let n,e,o="availableStudies"in t[0]>0&&ht(t);return{c(){n=f("main"),o&&o.c(),$(n,"class","svelte-ipu353")},m(t,l){d(t,n,l),o&&o.m(n,null),e=!0},p(t,[e]){"availableStudies"in t[0]>0?o?(o.p(t,e),1&e&&A(o,1)):(o=ht(t),o.c(),A(o,1),o.m(n,null)):o&&(J(),W(o,1,1,()=>{o=null}),L())},i(t){e||(A(o),e=!0)},o(t){W(o),e=!1},d(t){t&&a(n),o&&o.d()}}}function St(t,n,e){let o;return v(K.subscribe(t=>e(0,o=t))),[o]}return new class extends D{constructor(t){super(),P(this,t,St,wt,i,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
