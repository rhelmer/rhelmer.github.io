var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function l(t){return"function"==typeof t}function r(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function i(t,n,e,o){if(t){const l=s(t,n,e,o);return t[0](l)}}function s(t,n,e,o){return t[1]&&o?function(t,n){for(const e in n)t[e]=n[e];return t}(e.ctx.slice(),t[1](o(n))):e.ctx}function c(t,n,e,o,l,r,i){const c=function(t,n,e,o){if(t[2]&&o){const l=t[2](o(e));if(void 0===n.dirty)return l;if("object"==typeof l){const t=[],e=Math.max(n.dirty.length,l.length);for(let o=0;o<e;o+=1)t[o]=n.dirty[o]|l[o];return t}return n.dirty|l}return n.dirty}(n,o,l,r);if(c){const l=s(n,e,o,i);t.p(l,c)}}function u(t,n){t.appendChild(n)}function d(t,n,e){t.insertBefore(n,e||null)}function a(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function m(){return p(" ")}function h(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function $(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function g(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}let y;function b(t){y=t}function v(t){(function(){if(!y)throw new Error("Function called outside component initialization");return y})().$$.on_destroy.push(t)}const _=[],x=[],S=[],w=[],E=Promise.resolve();let k=!1;function C(t){S.push(t)}let I=!1;const O=new Set;function j(){if(!I){I=!0;do{for(let t=0;t<_.length;t+=1){const n=_[t];b(n),L(n.$$)}for(b(null),_.length=0;x.length;)x.pop()();for(let t=0;t<S.length;t+=1){const n=S[t];O.has(n)||(O.add(n),n())}S.length=0}while(_.length);for(;w.length;)w.pop()();k=!1,I=!1,O.clear()}}function L(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(C)}}const N=new Set;let A;function M(){A={r:0,c:[],p:A}}function T(){A.r||o(A.c),A=A.p}function B(t,n){t&&t.i&&(N.delete(t),t.i(n))}function J(t,n,e,o){if(t&&t.o){if(N.has(t))return;N.add(t),A.c.push(()=>{N.delete(t),o&&(e&&t.d(1),o())}),t.o(n)}}function W(t){t&&t.c()}function q(t,e,r){const{fragment:i,on_mount:s,on_destroy:c,after_update:u}=t.$$;i&&i.m(e,r),C(()=>{const e=s.map(n).filter(l);c?c.push(...e):o(e),t.$$.on_mount=[]}),u.forEach(C)}function z(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function F(t,n){-1===t.$$.dirty[0]&&(_.push(t),k||(k=!0,E.then(j)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function P(n,l,r,i,s,c,u=[-1]){const d=y;b(n);const f=l.props||{},p=n.$$={fragment:null,ctx:null,props:c,update:t,not_equal:s,bound:e(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:e(),dirty:u,skip_bound:!1};let m=!1;if(p.ctx=r?r(n,f,(t,e,...o)=>{const l=o.length?o[0]:e;return p.ctx&&s(p.ctx[t],p.ctx[t]=l)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](l),m&&F(n,t)),e}):[],p.update(),m=!0,o(p.before_update),p.fragment=!!i&&i(p.ctx),l.target){if(l.hydrate){const t=function(t){return Array.from(t.childNodes)}(l.target);p.fragment&&p.fragment.l(t),t.forEach(a)}else p.fragment&&p.fragment.c();l.intro&&B(n.$$.fragment),q(n,l.target,l.anchor),j()}b(d)}class D{$destroy(){z(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const G=[];function H(n,e=t){let o;const l=[];function i(t){if(r(n,t)&&(n=t,o)){const t=!G.length;for(let t=0;t<l.length;t+=1){const e=l[t];e[1](),G.push(e,n)}if(t){for(let t=0;t<G.length;t+=2)G[t][0](G[t+1]);G.length=0}}}return{set:i,update:function(t){i(t(n))},subscribe:function(r,s=t){const c=[r,s];return l.push(c),1===l.length&&(o=e(i)||t),r(n),()=>{const t=l.indexOf(c);-1!==t&&l.splice(t,1),0===l.length&&(o(),o=null)}}}}const K=t=>{window.dispatchEvent(new window.CustomEvent("WebChannelMessageToChrome",{detail:JSON.stringify({id:"pioneer",message:t})}))},Q={subscribe:H({},async t=>{let n,e,o;window.addEventListener("WebChannelMessageToContent",(function(l){console.debug(l.detail.message);const r=Object.keys(l.detail.message.data)[0],i=l.detail.message.data[r];switch(r){case"activeStudies":return e=i,void t({enrolled:n,activeStudies:e,availableStudies:o});case"availableStudies":o=i,K({activeStudies:!0});break;case"enrolled":n=i,K({availableStudies:!0});break;case"enroll":case"unenroll":!0===i&&K({enrolled:!0});break;case"installStudy":case"uninstallStudy":K({activeStudies:!0})}})),K({enrolled:!0})}).subscribe};const R=t=>({}),U=t=>({}),V=t=>({}),X=t=>({}),Y=t=>({}),Z=t=>({}),tt=t=>({}),nt=t=>({});function et(t){let n;return{c(){n=p("Join")},m(t,e){d(t,n,e)},d(t){t&&a(n)}}}function ot(t){let n;return{c(){n=p("Leave")},m(t,e){d(t,n,e)},d(t){t&&a(n)}}}function lt(t){let n,e,o,l,r,s,g,y,b,v,_,x,S,w,E;const k=t[5].name,C=i(k,t,t[4],nt),I=C||function(t){let n;return{c(){n=f("span"),$(n,"class","missing svelte-8i716l")},m(t,e){d(t,n,e)},d(t){t&&a(n)}}}(),O=t[5].authors,j=i(O,t,t[4],Z),L=j||function(t){let n;return{c(){n=f("span"),$(n,"class","missing svelte-8i716l")},m(t,e){d(t,n,e)},d(t){t&&a(n)}}}(),N=t[5].icon,A=i(N,t,t[4],X),M=A||function(t){let n;return{c(){n=f("span"),$(n,"class","missing svelte-8i716l")},m(t,e){d(t,n,e)},d(t){t&&a(n)}}}(),T=t[5].description,W=i(T,t,t[4],U),q=W||function(t){let n;return{c(){n=f("span"),$(n,"class","description svelte-8i716l")},m(t,e){d(t,n,e)},d(t){t&&a(n)}}}();function z(t,n){return t[1]?ot:et}let F=z(t),P=F(t);return{c(){n=f("article"),e=f("h2"),I&&I.c(),o=m(),l=f("div"),L&&L.c(),r=m(),s=f("div"),M&&M.c(),g=m(),y=f("div"),q&&q.c(),b=m(),v=f("button"),P.c(),_=p(" Study"),$(e,"class","svelte-8i716l"),$(l,"class","authors svelte-8i716l"),$(s,"class","icon"),$(y,"class","description svelte-8i716l"),v.disabled=x=!t[0],$(n,"class","study-card svelte-8i716l")},m(i,c){d(i,n,c),u(n,e),I&&I.m(e,null),u(n,o),u(n,l),L&&L.m(l,null),u(n,r),u(n,s),M&&M.m(s,null),u(n,g),u(n,y),q&&q.m(y,null),u(n,b),u(n,v),P.m(v,null),u(v,_),S=!0,w||(E=h(v,"click",t[2]),w=!0)},p(t,[n]){C&&C.p&&16&n&&c(C,k,t,t[4],n,tt,nt),j&&j.p&&16&n&&c(j,O,t,t[4],n,Y,Z),A&&A.p&&16&n&&c(A,N,t,t[4],n,V,X),W&&W.p&&16&n&&c(W,T,t,t[4],n,R,U),F!==(F=z(t))&&(P.d(1),P=F(t),P&&(P.c(),P.m(v,_))),(!S||1&n&&x!==(x=!t[0]))&&(v.disabled=x)},i(t){S||(B(I,t),B(L,t),B(M,t),B(q,t),S=!0)},o(t){J(I,t),J(L,t),J(M,t),J(q,t),S=!1},d(t){t&&a(n),I&&I.d(t),L&&L.d(t),M&&M.d(t),q&&q.d(t),P.d(),w=!1,E()}}}function rt(t,n,e){let{$$slots:o={},$$scope:l}=n,{enrolled:r=!1}=n,{studyEnrolled:i=!1}=n,{studyId:s}=n;return t.$$set=t=>{"enrolled"in t&&e(0,r=t.enrolled),"studyEnrolled"in t&&e(1,i=t.studyEnrolled),"studyId"in t&&e(3,s=t.studyId),"$$scope"in t&&e(4,l=t.$$scope)},[r,i,function(){K(i?{uninstallStudy:s}:{installStudy:s})},s,l,o]}class it extends D{constructor(t){super(),P(this,t,rt,lt,r,{enrolled:0,studyEnrolled:1,studyId:3})}}function st(t){let n;return{c(){n=p("Join")},m(t,e){d(t,n,e)},d(t){t&&a(n)}}}function ct(t){let n;return{c(){n=p("Leave")},m(t,e){d(t,n,e)},d(t){t&&a(n)}}}function ut(n){let e,o,l,r;function i(t,n){return t[0]?ct:st}let s=i(n),c=s(n);return{c(){e=f("button"),c.c(),o=p(" Ion")},m(t,i){d(t,e,i),c.m(e,null),u(e,o),l||(r=h(e,"click",n[1]),l=!0)},p(t,[n]){s!==(s=i(t))&&(c.d(1),c=s(t),c&&(c.c(),c.m(e,o)))},i:t,o:t,d(t){t&&a(e),c.d(),l=!1,r()}}}function dt(t,n,e){let{enrolled:o=!1}=n;return t.$$set=t=>{"enrolled"in t&&e(0,o=t.enrolled)},[o,function(){K(o?{unenroll:!0}:{enroll:!0})}]}class at extends D{constructor(t){super(),P(this,t,dt,ut,r,{enrolled:0})}}function ft(t,n,e){const o=t.slice();return o[2]=n[e],o}function pt(t){let n,e,o,l;n=new at({props:{enrolled:t[0].enrolled}});let r=t[0].availableStudies,i=[];for(let n=0;n<r.length;n+=1)i[n]=yt(ft(t,r,n));const s=t=>J(i[t],1,1,()=>{i[t]=null});return{c(){W(n.$$.fragment),e=m();for(let t=0;t<i.length;t+=1)i[t].c();o=p("")},m(t,r){q(n,t,r),d(t,e,r);for(let n=0;n<i.length;n+=1)i[n].m(t,r);d(t,o,r),l=!0},p(t,e){const l={};if(1&e&&(l.enrolled=t[0].enrolled),n.$set(l),1&e){let n;for(r=t[0].availableStudies,n=0;n<r.length;n+=1){const l=ft(t,r,n);i[n]?(i[n].p(l,e),B(i[n],1)):(i[n]=yt(l),i[n].c(),B(i[n],1),i[n].m(o.parentNode,o))}for(M(),n=r.length;n<i.length;n+=1)s(n);T()}},i(t){if(!l){B(n.$$.fragment,t);for(let t=0;t<r.length;t+=1)B(i[t]);l=!0}},o(t){J(n.$$.fragment,t),i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)J(i[t]);l=!1},d(t){z(n,t),t&&a(e),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(i,t),t&&a(o)}}}function mt(t){let n,e,o=t[2].name+"";return{c(){n=f("span"),e=p(o),$(n,"slot","name")},m(t,o){d(t,n,o),u(n,e)},p(t,n){1&n&&o!==(o=t[2].name+"")&&g(e,o)},d(t){t&&a(n)}}}function ht(t){let n,e,o=t[2].authors.name+"";return{c(){n=f("span"),e=p(o),$(n,"slot","authors")},m(t,o){d(t,n,o),u(n,e)},p(t,n){1&n&&o!==(o=t[2].authors.name+"")&&g(e,o)},d(t){t&&a(n)}}}function $t(t){let n,e,o=t[2].description+"";return{c(){n=f("span"),e=p(o),$(n,"slot","description")},m(t,o){d(t,n,o),u(n,e)},p(t,n){1&n&&o!==(o=t[2].description+"")&&g(e,o)},d(t){t&&a(n)}}}function gt(n){let e,o,l;return{c(){e=m(),o=m(),l=m()},m(t,n){d(t,e,n),d(t,o,n),d(t,l,n)},p:t,d(t){t&&a(e),t&&a(o),t&&a(l)}}}function yt(t){let n,e;return n=new it({props:{studyId:t[2].addon_id,enrolled:t[0].enrolled,studyEnrolled:t[0].activeStudies.includes(t[2].addon_id),$$slots:{default:[gt],description:[$t],authors:[ht],name:[mt]},$$scope:{ctx:t}}}),{c(){W(n.$$.fragment)},m(t,o){q(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.studyId=t[2].addon_id),1&e&&(o.enrolled=t[0].enrolled),1&e&&(o.studyEnrolled=t[0].activeStudies.includes(t[2].addon_id)),33&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){e||(B(n.$$.fragment,t),e=!0)},o(t){J(n.$$.fragment,t),e=!1},d(t){z(n,t)}}}function bt(t){let n,e,o="availableStudies"in t[0]>0&&pt(t);return{c(){n=f("main"),o&&o.c(),$(n,"class","svelte-ipu353")},m(t,l){d(t,n,l),o&&o.m(n,null),e=!0},p(t,[e]){"availableStudies"in t[0]>0?o?(o.p(t,e),1&e&&B(o,1)):(o=pt(t),o.c(),B(o,1),o.m(n,null)):o&&(M(),J(o,1,1,()=>{o=null}),T())},i(t){e||(B(o),e=!0)},o(t){J(o),e=!1},d(t){t&&a(n),o&&o.d()}}}function vt(t,n,e){let o;return v(Q.subscribe(t=>e(0,o=t))),K({removeBadgeCallout:!0}),[o]}return new class extends D{constructor(t){super(),P(this,t,vt,bt,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
